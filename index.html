<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" type="text/css" href="styles.css">
        <link rel="stylesheet" type="text/css" href="rewards.css">
        <link rel="icon" href="media/TP.png">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
        <script src="https://betterdiscord.app/js/vendor/countUp.min.js?v=DBxeQBHNMaYkRvB8uPOLm07cbQj54TDexlykb-Dcg28"></script>
        <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
        <link rel="stylesheet" href="https://github.hubspot.com/odometer/themes/odometer-theme-default.css" />
        <script src="js/main.js"></script>
        <script src="js/recentlyPlayed.js"></script>
        <script src="js/announcement.js"></script>
        <script src="js/searchBar.js"></script>
        <script src="js/profiles.js"></script>
        <script src="js/hallOfFame.js"></script>\
        <script src="js/rewardSystem.js"></script>
        <script src="js/navbarModals.js"></script>
        <script src="js/autoRefresh.js"></script>
        <script src="js/serverStatus.js"></script>
        <title>SPT Leaderboard</title>
    </head>

    <body>
        <nav class="navbar animate__animated animate__fadeIn">
            <a href="#">
                <img src="media/TP.png" alt="SPT Leaderboard Logo" class="navbar-logo">
            </a>
            <div class="navbar-links">
                <a id="infoButton" class="navbar-link">How it works</a>
            </div>
            <div class="navbar-links">
                <a id="tosButton" class="navbar-link">LA/TOS</a>
            </div>
            <div class="season-selector">
                <label for="seasonSelect">Season:</label>
                <select id="seasonSelect">
                </select>
            </div>
        </nav>
        <h1 style="margin-top: 150px;" class="animate__animated animate__fadeInDown">SPT Leaderboard</h1>
        <div id="welcomePopup">
            <div class="welcome-bg-image animate__animated animate__fadeIn">
                <img class="" src="media/TP.png" alt="SPT Leaderboard Preview">
            </div>
            <div class="popup-container">
                <div class="popup-content">
                    <h1 class="animate__animated animate__fadeInDown">Welcome to SPT Leaderboard!</h1>
                    <p class="animate__animated animate__fadeInUp">Track, progress and compare your Single Player Tarkov profile with other players, or compete with your friends!</p>
                    <p class="animate__animated animate__fadeInUp">Leaderboard updates are live! See how you rank against the community and set new personal records in your SPT experience!</p>
                    <button class="animate__animated animate__fadeInUp" id="continueBtn">Continue to Leaderboard</button>
                </div>
                <div class="popup-image animate__animated animate__fadeInUp">
                    <img class="" src="media/leaderboard_preview.png" alt="SPT Leaderboard Preview">
                </div>
            </div>
        </div>
        <div id="infoModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Ranking System Explained</h2>
                <p>The leaderboard uses a weighted scoring system to calculate player performance across multiple metrics.</p>
                <h3>1. Leaderboard Terminology</h3>
                <ul>
                    <li><strong>KDR:</strong> Kill-to-Death Ratio (Kills √∑ Deaths)</li>
                </ul>
                <h3>2. Season System</h3>
                <p>Competitive cycles with unique leaderboards:</p>
                <ul>
                    <li><strong>Duration:</strong> 1-3 months per season</li>
                    <li><strong>Reset:</strong> New season automatically starts when SPT major version releases or SPT Leaderboard mod</li>
                    <li><strong>Hall of Fame:</strong> Top 3 players from previous season are shown permanently on the page</li>
                    <li><strong>Data:</strong> Full season archives in the dropdown menu</li>
                </ul>
                <h3>3. Skill Formula</h3>
                <p>Final skill score is calculated using these weighted factors:</p>
                <ul>
                    <li><strong>KDR</strong></li>
                    <li><strong>Survival Rate</strong> </li>
                    <li><strong>Total Raids</strong></li>
                    <li><strong>This includes calibration:</strong>
                        <ul>
                            <li>Minimum 100 raids required for proper skill score ranking</li>
                            <li>70% skill score penalty until player reaches 50 raids</li>
                            <li>Penalty decreases linearly until player reaches 100 raids</li>
                        </ul>
                    </li>
                </ul>
                <h3>4. Skill Tiers</h3>
                <p>Players are classified into tiers based on final skill score:</p>
                <ul>
                    <li><strong>L- to L+:</strong> Low (0.2-0.55)</li>
                    <li><strong>M- to M+:</strong> Medium (0.55-0.78)</li>
                    <li><strong>H- to H+:</strong> High (0.78-0.94)</li>
                    <li><strong>P- to P+:</strong> Pro (0.94-99)</li>
                    <li><strong>G:</strong> Godlike (1)</li>
                </ul>
                <h3>5. Visual Indicators</h3>
                <p>Statistics are color-coded based on performance thresholds:</p>
                <ul>
                    <li><strong>KDR:</strong>
                        <span class="bad">Poor</span> (<5), <span class="average">Standard</span> (5-12), <span class="good">Skilled</span> (12-14.99), <span class="impressive">Impressive</span> (15+)
                    </li>
                    <li><strong>Raid Duration:</strong>
                        <span class="bad">Short</span> (<5m), <span class="average">Average</span> (5-15m), <span class="good">Long</span> (15-20m), <span class="impressive">Impressive</span> (20m+)
                    </li>
                </ul>
            </div>
        </div>
        <div id="tosModal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <h2>Legal Agreement / Terms of Service (LA/TOS)</h2>
                <p>By submitting your statistics to the SPT Leaderboard, you agree to comply with the following Terms of Service. Violations may lead to removal from the leaderboard, temporary suspensions, or permanent bans.</p>
                <h3>1. General Rules</h3>
                <ul>
                    <li><strong>Fair Play:</strong> Use of cheats, exploits, stat manipulation, or any attempt to deceive the system will result in a permanent ban from the leaderboard.</li>
                    <li><strong>Allowed Mods:</strong> Cosmetic and quality-of-life (QoL) mods are permitted. However, gameplay-altering mods (e.g., god mode, unlimited ammo, faster reload speed, extra amount of loot, radar, revival after death) are strictly forbidden.</li>
                    <li><strong>Profile Standing:</strong> Profiles which been automatically flagged by the system for suspicious activity or abnormal statistics may be disqualified or banned without the right to appeal.</li>
                    <li><strong>Content Guidelines:</strong> Usernames, profile pictures (PFP), and ‚ÄúAbout Me‚Äù sections must not contain offensive, discriminatory, hateful, or NSFW content. Violations may lead to disqualification, removal from leaderboard or permanent ban.</li>
                </ul>
                <h3>2. Eligibility & Participation</h3>
                <p>Participation is open to all players who comply with the rules outlined in this agreement:</p>
                <ul>
                    <li><strong>Mod Policy:</strong> Use of any mod that gives a competitive or statistical advantage will result in disqualification or ban from the leaderboard as stated at General Rules.</li>
                    <li><strong>One Profile Policy:</strong> Players may only submit statistics from one account. This policy doesn't apply to players with a "Tester" flag.</li>
                    <li><strong>Honesty:</strong> All submitted statistics must reflect genuine gameplay. Any form of falsified or edited data will result in a disqualification from leaderboard, or permanent ban.</li>
                </ul>
                <h3>3. Data Usage & Rights</h3>
                <ul>
                    <li><strong>Public Display:</strong> By submitting your data, you grant permission for it to be publicly displayed on the leaderboard. This applies to any form or state of the player profile.</li>
                    <li><strong>Moderation:</strong> Administrators reserve the right to review, modify, or remove any entries of the leaderboard at their sole discretion without prior notice.</li>
                    <li><strong>Policy Updates:</strong> These Terms may be updated at any time. Continued use of the mod, leaderboard, implies acceptance of the most recent version.</li>
                </ul>
                <p><em>Last updated: May 8, 2025</em></p>
            </div>
        </div>

        <div class="leaderboard-notification">
            <div class="notification-content">
                <p><img src="media/loading_bar.gif" width="20px" height="20px" style="position: relative; top: 5px;"> Hold on tight! We're working on a v2.2.0 update!</p>
                <p>The release will be published on official SPT Hub - as for now, give it some rest!</p>
            </div>
            <button class="close-notification" aria-label="Close notification">&times;</button>
        </div>

        <div class="top-stats-bar">
            <div class="live-data-label" id="serverStatus">Server Online</div>
            <div class="stats-line">
                <div class="stats-item"><strong>Kills:</strong> <span id="totalKills" class="odometer">0</span></div>
                <div class="stats-item"><strong>Deaths:</strong> <span id="totalDeaths" class="odometer">0</span></div>
                <div class="stats-item"><strong>Raids:</strong> <span id="totalRaids" class="odometer">0</span></div>
                <div class="stats-item"><strong>Damage:</strong> <span id="totalDamage" class="odometer">0</span></div>
                <div class="stats-item"><strong>K/D:</strong> <span id="averageKDR" class="odometer">0.00</span></div>
                <div class="stats-item"><strong>Survival Rate:</strong> <span id="averageSurvival" class="odometer">0</span>%</div>
                <div class="stats-item"><strong>In Raid:</strong> <span id="totalPlayTime" class="odometer">0</span>minutes</div>
            </div>
            <div class="player-stats">
                <div class="stats-item player-count"><strong>Season Players:</strong> <span id="totalPlayers" class="odometer">0</span></div>
                <div class="stats-item online-count"><strong>Online:</strong> <span id="onlinePlayers" class="odometer">0</span></div>
            </div>
        </div>

        <div id="winners" class="animate animate__animated animate__fadeIn">
            <h2>Our previous season Champions!</h2>
            <div class="winners-container">
                <div class="winner-card">
                    <p class="winner-name">ü•à muertenis</p>
                    <p class="winner-rank">Second place</p>
                    <p class="winner-skill">Skill score: 29.68</p>
                    <p class="winner-stats">Raids: 203 | KDR: 22.45</p>
                </div>
                <div class="winner-card">
                    <p class="winner-name">ü•á Zetnork</p>
                    <p class="winner-rank">üëë First place üëë</p>
                    <p class="winner-skill">Skill score: 30.11</p>
                    <p class="winner-stats">Raids: 120 | KDR: 32</p>
                </div>
                <div class="winner-card">
                    <p class="winner-name">ü•â DiSir</p>
                    <p class="winner-rank">Third place</p>
                    <p class="winner-skill">Skill score: 28.40</p>
                    <p class="winner-stats">Raids: 131 | KDR: 18.29</p>
                </div>
            </div>
        </div>
        <p id="status"></p>
        <div class="leaderboard-controls">
            <div class="search-container">
                <input type="text" id="playerSearch" placeholder="Find player..." />
                <button id="clearSearch">Clear</button>
            </div>
            <div class="controls-toolset">
                <div class="auto-update-control">
                    <label>
                        <input type="checkbox" id="autoUpdateToggle" checked /> Live Data Flow </label>
                    <span id="timeToUpdate">Next update in: 3s</span>
                </div>
                <button id="manualUpdate" class="button">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M23 4v6h-6M1 20v-6h6"></path>
                        <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path>
                    </svg> Update Now </button>
            </div>
        </div>
        <table id="leaderboardTable" class="animate animate__animated animate__fadeIn">
            <thead>
                <tr>
                    <th data-sort="rank">Rank</th>
                    <th data-sort="name">Name</th>
                    <th data-sort="lastPlayed">Last Raid</th>
                    <th>Profile</th>
                    <th>Standing</th>
                    <th data-sort="totalRaids">Raids</th>
                    <th data-sort="survivedToDiedRatio">Survival Rate</th>
                    <th data-sort="killToDeathRatio">KDR</th>
                    <th data-sort="averageLifeTime">AVG Life Time</th>
                    <th data-sort="totalScore">Skill</th>
                    <!--
                        <th>TP</th>
                        <th>Fika</th>
                    -->
                    <th>SPT</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
        <div class="notification-container">
            <div id="loadingNotification" class="animate animate__animated animate__fadeInUp" style="display: none;">Loading Players...</div>
            <div id="emptyLeaderboardNotification" class="animate animate__animated animate__fadeInUp" style="display: none;">Whoops! Looks like leaderboard is empty. Be the first one to submit your stats!</div>
        </div>
        <div id="playerProfileModal" class="profile-modal">
            <div class="profile-modal-overlay">
            <!-- Here goes anything -->
            </div>
            <div class="profile-modal-container">
                <span class="profile-close-btn">&times;</span>
                <div id="modalPlayerInfo" class="profile-modal-content"></div>
            </div>
        </div>
        <script src="https://github.hubspot.com/odometer/odometer.js"></script>
    </body>

</html>